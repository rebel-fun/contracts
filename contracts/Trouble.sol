// MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
// MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
// MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
// MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMXkddddxKWMMMMMMMMMMMMMMMMXkddddx0WMMMMMMMMMMMMMMMMMMMMMMMMMMMM
// MMMMMMMMMMMMMWNXXXXXXXXXXXXXXXXXXWMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMWd.    .dWMMMMMMMMMMMMMMMWx.    .dWMMMMMMMMMMMMMMMMMMMMMMMMMMMM
// MMMMMMMMMMMMMK:.................;0MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMX:     '0MMMMMMMMMMMMMMMMNc     .OMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
// MMMMMMMMMMMMMk.                 ;KMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM0'     :XMMMMMMMMMMMMMMMM0'     ;XMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
// MMMMMMMMMMMMWd....         .....oWMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMx.    .dWMMMMMMMMMMMMMMMMx.     oWMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
// MMMMMMMMMMMMWXK00Kd.     .o000KKNMMMMMMMMMMMWWMMMMMMMMMWNNNNWWMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNc     .OMMWNNNWMMMMMMMMMNl     .kMMMMMMMMMWNNNNWWMMMMMMMMMMMMMM
// MMMMMMMMMMMMMMMMMWx.     '0MMMMNxcccccxXKxl:;c0MMMN0xl:,'..',;lxKWMMMMMXdccccckNMMMMMNkcccccdXMM0'     ,xdc,'.',:o0WMMMMMK,     ;KMMMMWXko:,''.',:lkXWMMMMMMMMMM
// MMMMMMMMMMMMMMMMMNc      cNMMMMO.     .;.    'OWKo,.            .:OWMMMk.     lWMMMMMK,     ;XMMx.                .:0WMMMk.     lWMMWOc.            .dNMMMMMMMMM
// MMMMMMMMMMMMMMMMMK,     .dMMMMWd             :0o.       ...       .kWMWl     .kMMMMMMx.     oWMNc         ..        ,0MMWl     .kMMKc.    .cdxxl'     oNMMMMMMMM
// MMMMMMMMMMMMMMMMMk.     '0MMMMX:      .:dkOkkx:      'oOKK0d'      ;KMX;     ,KMMMMMNl     .kMMK,      ;d0KKOl.      oWMK;     ,KMK:     .cxxxxxc.    '0MMMMMMMM
// MMMMMMMMMMMMMMMMWl      :XMMMM0'     .xWMMMMWo.     ;KMMMMMMx.     '0Mk.     cNMMMMMK,     ;KMMk.     lNMMMMMWl      cNMk.     lNWo                   '0MMMMMMMM
// MMMMMMMMMMMMMMMMK;     .dWMMMWd.     oWMMMMMX;      dWMMMMMNo      :XWo     .xMMMMMMk.     lWMWl     .OMMMMMMX:     .xWWo     .xMX;     .;::::::::::::dXMMMMMMMM
// MMMMMMMMMMMMMMMMk.     .OMMMMNc     .OMMMMMMX:      ,kXNNXOc.     'OMN:     .dWMMMW0;     .kMMK;      :OXNNKx;      cXMX;     ,0MX;     ,0MMMMWKOOOOOKWMMMMMMMMM
// MMMMMMMMMMMMMMMWo      :XMMMM0'     :XMMMMMMWk.       .''.       ;0WMNc      .;cc:;.     .oNMMk.       ..''.      .lXMMO.     cNMWd.     ,ldxd:.    .dNMMMMMMMMM
// MMMMMMMMMMMMMMMX;      oWMMMMx.     oWMMMMMMMWO;.             .;kNMMMM0;                ,xNMMWo                 .:OWMMWo     .xMMMNx'             .:OWMMMMMMMMMM
// MMMMMMMMMMMMMMMKl,,,,,c0MMMMWk;,,,,c0MMMMMMMMMMNOo:'......';lxKWMMMMMMMXkc,.........,:oONMMMMNd;,,,,lko,.....,:d0WMMMMNx;,,,,lKMMMMWXxc,.......,cdKWMMMMMMMMMMMM
// MMMMMMMMMMMMMMMMWWWWWWWMMMMMMWWWWWWWMMMMMMMMMMMMMMWNXKKKKXNWMMMMMMMMMMMMMMWNXKKKKKKXWWMMMMMMMMWWWWWWWMMWXKKKXNWMMMMMMMMWWWWWWWMMMMMMMMMWNXKKKXNWMMMMMMMMMMMMMMMM
// MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
// MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
// MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM

// by @mboyle for Rebel (https://rebel.fun)

// SPDX-License-Identifier: MIT
pragma solidity ^0.8.4;

import "@openzeppelin/contracts/token/ERC20/ERC20.sol";
import "@openzeppelin/contracts/token/ERC20/extensions/ERC20Burnable.sol";
import "@openzeppelin/contracts/token/ERC20/extensions/ERC20Snapshot.sol";
import "@openzeppelin/contracts/token/ERC20/extensions/draft-ERC20Permit.sol";
import "@openzeppelin/contracts/token/ERC20/extensions/ERC20Votes.sol";
import "@openzeppelin/contracts/security/Pausable.sol";
import "@openzeppelin/contracts/access/AccessControl.sol";

contract Trouble is ERC20, ERC20Burnable, ERC20Snapshot, AccessControl, Pausable, ERC20Permit, ERC20Votes {
  
  bytes32 public constant SNAPSHOT_ROLE = keccak256("SNAPSHOT_ROLE");
  bytes32 public constant PAUSER_ROLE   = keccak256("PAUSER_ROLE");
  bytes32 public constant MINTER_ROLE   = keccak256("MINTER_ROLE");
  bytes32 public constant BURNER_ROLE   = keccak256("BURNER_ROLE");
  bytes32 public constant TRANSFER_ROLE = keccak256("TRANSFER_ROLE");

  constructor() ERC20("Trouble", "TROUBLE") ERC20Permit("TROUBLE") {
    _grantRole(DEFAULT_ADMIN_ROLE, msg.sender);
    _grantRole(SNAPSHOT_ROLE, msg.sender);
    _grantRole(PAUSER_ROLE, msg.sender);
    _grantRole(MINTER_ROLE, msg.sender);
    _grantRole(BURNER_ROLE, msg.sender);
    _grantRole(TRANSFER_ROLE, msg.sender);
  }

  function snapshot() public onlyRole(SNAPSHOT_ROLE) {
    _snapshot();
  }

  function pause() public onlyRole(PAUSER_ROLE) {
    _pause();
  }

  function unpause() public onlyRole(PAUSER_ROLE) {
    _unpause();
  }

  function makeTrouble(address to, uint256 amount) public onlyRole(MINTER_ROLE) {
    _mint(to, amount);
  }

  function burn(uint256 _amount) public override(ERC20Burnable) {
    _burn(msg.sender, _amount);
  }

  function burnFrom(address _for, uint256 _amount) public override(ERC20Burnable) onlyRole(BURNER_ROLE) {
    _burn(_for, _amount);
  }

  function transfer(address _to, uint256 _value) public onlyRole(TRANSFER_ROLE) override(ERC20) returns (bool success) {
    return super.transfer(_to, _value);
  }

  function transferFrom(address _from, address _to, uint256 _value) public onlyRole(TRANSFER_ROLE) override(ERC20) returns (bool success) {
    _transfer(_from, _to, _value);
    return true;
  }

  // The following functions are overrides required by Solidity.

  function _beforeTokenTransfer(address from, address to, uint256 amount)
    internal
    override(ERC20, ERC20Snapshot)
  {
    super._beforeTokenTransfer(from, to, amount);
  }

  function _afterTokenTransfer(address from, address to, uint256 amount)
    internal
    override(ERC20, ERC20Votes)
  {
    super._afterTokenTransfer(from, to, amount);
  }

  function _mint(address to, uint256 amount)
    internal
    override(ERC20, ERC20Votes)
  {
    super._mint(to, amount);
  }

  function _burn(address account, uint256 amount)
    internal
    override(ERC20, ERC20Votes)
  {
    super._burn(account, amount);
  }
}